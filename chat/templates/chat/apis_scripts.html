{% block apis %}
    <script>
        function getAddress(lat, lon, callback) {
            // get address from coordinates
            $.get(
                "{% url 'apis:addressFromGps' %}",
                {'lat': lat, 'lon': lon},
                callback
            );
        }

        function getGPS(address, callback) {
            // get gps fromAddress
            $.get(
                "{% url 'apis:gpsFromAddress' %}",
                {'address': address},
                callback);
        }

        function inNaviterierDB(address, callback) {
            //check if address is Naviterier
            $.get(
                "{% url 'naviterier:isAddressInDb' %}",
                {'address': address},
                callback
            );

            return false;
        }

        function getAddressFromTriple(stop, direction, line, callback) {
            getGpsFromTriple(stop, direction, line, function (data) {
                object = JSON.parse(data);
                getAddress(object.lat,object.lon, callback);
            })
        }

        function getGpsFromTriple(stop, direction, line, callback) {
            $.post(
                "{% url 'dpp:find' %}",
                {
                    csrfmiddlewaretoken: "{{ csrf_token }}",
                    startStopName: stop,
                    startStopDirection: direction,
                    startLineNumber: line
                },
                callback(data)
            )
        }
    </script>
{% endblock %}